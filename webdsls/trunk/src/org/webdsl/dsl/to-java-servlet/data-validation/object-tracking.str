module org/webdsl/dsl/to-seam/object-tracking

imports 
  libstrategolib  
  Java-15
  libjava-front 
  
imports 
  libwebdsl-front
  
rules

  validation-objects-before-setting :
    (x,x_new) -> []
    /*bstm* |[ 
      if(ps != null){
        Object x_tmp = ps.getOldValuesForInputs().get(x);
        if(x_tmp == null) {
          ps.getOldValuesForInputs().put(x_new,x);//System.out.println(x_new+" (object property change 1)-> "+x);
        }
        else {
          ps.getOldValuesForInputs().put(x_new,x_tmp);//System.out.println(x_new+" (object property change 2)-> "+x_tmp); 
        }
      }
    ]|
    with  x_tmp := <newname> "tmp"
    */
  store-inputs-assignments-object-tracking :
    (x_temp,x) -> []
    /*bstm* |[
      ps.getOldValuesForInputs().put(x_temp,x);//System.out.println(x_temp+" (store inputs 1)-> "+x);
    ]|*/
    
  store-inputs-assignments-object-tracking :
    (x_temp,x,e1) -> []
    /*bstm* |[
      ps.getOldValuesForInputs().put(x_temp,e1.get#x());//System.out.println(x_temp+" (store inputs 2)-> "+e1.get#x());
    ]|*/