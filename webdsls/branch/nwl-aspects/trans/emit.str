module emit

imports libstratego-aterm libstratego-gpp
imports include/nwl read

rules // desugared builder
    
  emit: def -> def
    with rules(Emit :+= def)
    
  retrieve-emits =
    bagof-Emit;
    rules(Emit :- _)
  
  add-emits =
    with( retrieve-emits;
          map(store-def)
        )
          