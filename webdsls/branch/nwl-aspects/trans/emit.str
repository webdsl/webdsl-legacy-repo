module emit

imports libstratego-aterm libstratego-gpp
imports include/nwl

rules // desugared builder
    
  emit: def -> def
    with rules(Emit :+= def)
    
  retrieve-emits =
    bagof-Emit;
    rules(Emit :- _)
  
  add-emits: def1* -> def2*
    with  emit* := <retrieve-emits>;
          def2* := [def1*, emit*]
          