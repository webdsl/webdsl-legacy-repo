module datamodel-to-hbm
imports DataModel libstrategolib Java-15

strategies

  main = 
   io-wrap(
     datamodel-to-hbm
   )

  datamodel-to-hbm :
    Domain(qid, sortdefs) -> <Hd; /* map( */ sortdef-to-class/* ) */> sortdefs
    where rules( Package : _ -> qid )

  sortdef-to-class : 
    SortDef(n, props) -> compilation-unit|[

      package ~id:<Package>;

      import javax.persistence.*;
      import org.hibernate.*;

      @Entity
      class ~id:n {
        
      }

    ]|