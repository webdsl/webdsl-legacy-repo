/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table AUTHORS if exists
drop table SUBTOPICS if exists
drop table TOPIC if exists
drop table USER if exists
create table AUTHORS (TOPIC_ID bigint not null, USER_ID bigint not null, primary key (USER_ID, TOPIC_ID))
create table SUBTOPICS (parent bigint not null, child bigint not null, name varchar(255) not null, primary key (parent, name))
create table TOPIC (TOPIC_ID bigint generated by default as identity (start with 1), text varchar(255), created timestamp, modified timestamp, primary key (TOPIC_ID))
create table USER (USER_ID bigint generated by default as identity (start with 1), username varchar(255), fullname varchar(255), password varchar(255), email varchar(255), url varchar(255), primary key (USER_ID))
alter table AUTHORS add constraint FK4429C2888D47E20 foreign key (USER_ID) references USER
alter table AUTHORS add constraint FK4429C28C5A019F0 foreign key (TOPIC_ID) references TOPIC
alter table SUBTOPICS add constraint FKC724F7444532CE1 foreign key (child) references TOPIC
alter table SUBTOPICS add constraint FKC724F744C35A406F foreign key (parent) references TOPIC
SET AUTOCOMMIT FALSE
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
alter table AUTHORS drop constraint FK4429C2888D47E20
alter table AUTHORS drop constraint FK4429C28C5A019F0
alter table SUBTOPICS drop constraint FKC724F7444532CE1
alter table SUBTOPICS drop constraint FKC724F744C35A406F
drop table AUTHORS if exists
drop table SUBTOPICS if exists
drop table TOPIC if exists
drop table USER if exists
create table AUTHORS (TOPIC_ID bigint not null, USER_ID bigint not null, primary key (USER_ID, TOPIC_ID))
create table SUBTOPICS (parent bigint not null, child bigint not null, name varchar(255) not null, primary key (parent, name))
create table TOPIC (TOPIC_ID bigint generated by default as identity (start with 1), text varchar(255), created timestamp, modified timestamp, primary key (TOPIC_ID))
create table USER (USER_ID bigint generated by default as identity (start with 1), username varchar(255), fullname varchar(255), password varchar(255), email varchar(255), url varchar(255), primary key (USER_ID))
alter table AUTHORS add constraint FK4429C2888D47E20 foreign key (USER_ID) references USER
alter table AUTHORS add constraint FK4429C28C5A019F0 foreign key (TOPIC_ID) references TOPIC
alter table SUBTOPICS add constraint FKC724F7444532CE1 foreign key (child) references TOPIC
alter table SUBTOPICS add constraint FKC724F744C35A406F foreign key (parent) references TOPIC
SET AUTOCOMMIT FALSE
INSERT INTO TOPIC VALUES(1,'Topic 1 text','2007-02-09 15:11:12.649000000','2007-02-09 15:11:12.649000000')
COMMIT
INSERT INTO TOPIC VALUES(2,'Topic 2 text','2007-02-09 15:11:14.609000000','2007-02-09 15:11:14.609000000')
COMMIT
INSERT INTO TOPIC VALUES(3,'Topic 3 text','2007-02-09 15:11:14.612000000','2007-02-09 15:11:14.612000000')
COMMIT
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
DISCONNECT
