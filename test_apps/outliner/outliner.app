application outliner

imports imports

section pages

define page root() {
  var d: Document := null;
  outliner_contents(d)
}

define page outliner(doc: Document) {
  outliner_contents(doc)
}

define no-span outliner_contents(doc: Document) {
  //loadDojo(true, "1.3.2")
  loadDojo(false, "1.3.0")
  loadCSS("outliner.css")
  loadCSS("widgets.css")

  //a hook for the popup windows
  placeholder popup {}
  
  //footerLayout does not really work in combination with dojotabs
  footerLayout("0px")[width:="800px"] with {
    contents() {
      collapseUp() {
          toolbar(doc)
      }
      main(doc)
      block[id:= statusBar] { " Loaded." } 
      container[id:= footer] { "application generated by WebDSLx" }
    }
    footer() {
    }
  }
}

define main(doc: Document) {
  if (doc == null) {
    "(No document loaded)" 
  }
  else {
    tabs[height:="550px"] {
      tab(doc.name) {
        masterdetail() with {
          masterview() {
            documentTree(doc)
          }
          detailview() {
            detailView(doc.root)
          }
        }
      }
      lazytab("Print preview") with { 
        contents(){
          printpreview(doc)
         } loading() { 
          "loading print preview.." 
         }
      }
/*      lazytab("JSON tree") {
        documentoutlinehelper(doc)
      } 
*/    }
  }
} 

